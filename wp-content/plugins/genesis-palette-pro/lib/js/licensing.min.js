function dppLicenseSubmitReset(a,b){jQuery("p.gppro-license-field-message").text(" "),"disable"===b&&(a.attr("disabled","disabled"),jQuery(".gppro-license-spinner").addClass("gppro-license-spinner-display")),"enable"===b&&(a.removeAttr("disabled"),jQuery(".gppro-license-spinner").removeClass("gppro-license-spinner-display"))}function dppLicenseFieldMessage(a,b,c){var d=jQuery("p.gppro-license-field-message"),e=jQuery(".gppro-license-key-core-single .password-toggle");d.text(" "),jQuery(a).removeClass("gppro-license-core-valid gppro-license-core-invalid"),"error"===c&&a.addClass("gppro-license-core-invalid"),"success"===c&&a.addClass("gppro-license-core-valid"),"normal"===c&&a.removeClass("gppro-license-core-valid gppro-license-core-invalid"),""!==b&&d.text(b),""===a.val()?e.addClass("password-toggle-hide"):e.removeClass("password-toggle-hide")}function dppLicenseButtonSwap(a,b){jQuery("input#gppro-license-action").val(a),jQuery("button.gppro-license-core-button").html(b),"core_activate"===a&&jQuery("input#gppro-license-core").val("")}jQuery(document).ready(function(a){a.fn.divExists=function(a){var b=[].slice.call(arguments,1);return this.length&&a.call(this,b),this};var b="",c="",d="",e="",f="",g="",h="normal",i="",j="",k="",l="",m="",n="",o=licenseText.generalerror;a("td.gppro-license-key-core-single").divExists(function(){""!==a("#gppro-license-core").val()&&a(".gppro-license-key-core-single .password-toggle").removeClass("password-toggle-hide"),a("#gppro-license-core").hidePassword(!1),a("td.gppro-license-key-core-single").on("click","span.password-toggle",function(){a(this).hasClass("password-visible")?(a(this).removeClass("password-visible dashicons-visibility").addClass("dashicons-hidden"),a("#gppro-license-core").hidePassword(!1)):(a(this).addClass("password-visible dashicons-visibility").removeClass("dashicons-hidden"),a("#gppro-license-core").showPassword(!1))})}),a(".gppro-license-key-core-row").on("click",".gppro-license-core-button",function(p){if(p.preventDefault(),c=a(this),dppLicenseSubmitReset(c,"disable"),b=a("td.gppro-license-key-core-single"),e=a(b).find("#gppro-license-core"),g=a(b).find("#gppro-license-core-nonce").val(),""===g)return dppLicenseSubmitReset(c,"enable"),dppLicenseFieldMessage(e,o,"error"),!1;if(d=a(b).find("#gppro-license-action").val(),f=e.val(),""===d)return dppLicenseSubmitReset(c,"enable"),!1;if(""===f)return dppLicenseSubmitReset(c,"enable"),dppLicenseFieldMessage(e,licenseText.missingkey,"error"),!1;"core_activate"===d&&(m="core_deactivate",l=licenseText.deactivate,n=licenseText.deactivated,h="success"),"core_deactivate"===d&&(m="core_activate",l=licenseText.activate,n=licenseText.deactivated,h="normal");var q={action:d,license:f,nonce:g};jQuery.post(ajaxurl,q,function(a){dppLicenseSubmitReset(c,"enable");var b;try{b=jQuery.parseJSON(a)}catch(d){return!1}return b.success===!0?(j=void 0===b.action?m:b.action,i=void 0===b.button?l:b.button,k=void 0===b.message?n:b.message,dppLicenseButtonSwap(j,i),dppLicenseFieldMessage(e,k,h),window.onbeforeunload=null,!1):b.success===!1&&""!==b.errcode?(k=""===b.message?o:b.message,dppLicenseFieldMessage(e,k,"error"),!1):b.success===!1?(dppLicenseFieldMessage(e,o,"error"),!1):void 0})})});